<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<!-- Cache-busting helpers (GitHub Pages + mobile Safari can aggressively cache JS) -->
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/>
<meta http-equiv="Pragma" content="no-cache"/>
<meta http-equiv="Expires" content="0"/>
<title>LiftAI v7 ‚Äî Olympic Weightlifting Planner</title>
<link href="manifest.json" rel="manifest"/>
<!-- v7.45 CLOUD SYNC: Supabase JS SDK -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
:root{--bg:#0a0e1a;--card:#111827;--card-hover:#1a2332;--border:#1f2937;--text:#f9fafb;--text-dim:#9ca3af;--primary:#3b82f6;--primary-dark:#2563eb;--success:#10b981;--warning:#f59e0b;--danger:#ef4444;--purple:#8b5cf6;--accent:#06b6d4}
*{box-sizing:border-box;margin:0;padding:0}
body{background:var(--bg);color:var(--text);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;line-height:1.5;overflow-x:hidden}

/* Header */
header{position:sticky;top:0;background:rgba(10,14,26,0.95);backdrop-filter:blur(12px);border-bottom:1px solid var(--border);padding:12px 16px;z-index:100;display:flex;justify-content:space-between;align-items:center}
header h1{font-size:18px;font-weight:700;background:linear-gradient(135deg,#3b82f6,#8b5cf6);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.header-actions{display:flex;gap:8px}

/* Main */
main{max-width:1400px;margin:0 auto;padding:16px 16px 140px}

/* Buttons */
button{background:var(--primary);color:#fff;border:none;border-radius:10px;padding:10px 16px;font:600 13px/1.4 inherit;cursor:pointer;transition:all .2s;display:inline-flex;align-items:center;gap:6px}
button:hover{background:var(--primary-dark);transform:translateY(-1px)}
button:active{transform:translateY(0)}
button:disabled{opacity:.5;cursor:not-allowed;transform:none}
button.secondary{background:rgba(255,255,255,.05);border:1px solid var(--border)}
button.secondary:hover{background:rgba(255,255,255,.08)}
button.danger{background:var(--danger)}
button.success{background:var(--success)}
button.small{padding:7px 12px;font-size:12px}
button.icon{padding:8px;border-radius:8px}

/* Cards */
.card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:20px;margin-bottom:14px}
.card-title{font-size:17px;font-weight:700;margin-bottom:6px}
.card-subtitle{font-size:13px;color:var(--text-dim)}

/* Forms */
.form-group{margin-bottom:18px}
label{display:block;font-size:11px;font-weight:600;color:var(--text-dim);margin-bottom:6px;text-transform:uppercase;letter-spacing:.5px}
input,select{width:100%;background:rgba(17,24,39,.8);border:1px solid var(--border);border-radius:10px;padding:11px 14px;color:var(--text);font-size:14px;transition:border-color .2s}

/* Checkbox rows */
.checkbox-row{display:flex;gap:10px;align-items:center;padding:10px 12px;background:rgba(17,24,39,.6);border:1px solid var(--border);border-radius:10px}
.checkbox-row input[type=\"checkbox\"]{width:auto;transform:scale(1.1)}
.checkbox-row span{font-size:14px;font-weight:600;color:var(--text)}

/* Toggle rows (switch) */
.toggle-row{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:10px 12px;background:rgba(17,24,39,.6);border:1px solid var(--border);border-radius:10px}
.toggle-label{font-size:14px;font-weight:600;color:var(--text)}
.switch{position:relative;display:inline-block;width:46px;height:26px;flex:0 0 auto}
.switch input{opacity:0;width:0;height:0}
.slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background:rgba(255,255,255,.08);border:1px solid var(--border);transition:all .2s;border-radius:999px}
.slider:before{position:absolute;content:"";height:20px;width:20px;left:3px;top:50%;transform:translateY(-50%);background:#fff;border-radius:50%;transition:all .2s;box-shadow:0 2px 6px rgba(0,0,0,.35)}
.switch input:checked + .slider{background:rgba(59,130,246,.35);border-color:rgba(59,130,246,.7)}
.switch input:checked + .slider:before{transform:translate(20px,-50%)}
input:focus,select:focus{outline:none;border-color:var(--primary)}
.form-row{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:14px}

/* Calendar Week View */
.week-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;flex-wrap:wrap;gap:12px}
.week-selector{display:flex;gap:8px;align-items:center}
.week-nav{padding:8px 12px;font-size:13px;font-weight:600;background:rgba(255,255,255,.05);border:1px solid var(--border);border-radius:8px;cursor:pointer;transition:all .2s}
.week-nav:hover{background:rgba(255,255,255,.08)}
.week-current{font-size:15px;font-weight:700;padding:0 8px}

/* New Inline Day Cards */
.day-card-v2{background:rgba(17,24,39,.6);border:1px solid var(--border);border-radius:12px;margin-bottom:12px;transition:all .2s;overflow:hidden}
.day-card-v2:hover{border-color:rgba(59,130,246,.5)}
.day-card-v2.today{border-color:var(--primary);box-shadow:0 0 12px rgba(59,130,246,.3)}
.day-card-v2.completed{border-color:var(--success)}
.day-card-v2.recovery-day{opacity:.85}
.day-card-v2.accessory-day{border-color:rgba(245,158,11,.3)}

.day-card-header{display:flex;justify-content:space-between;align-items:center;padding:16px;cursor:pointer;transition:background .2s}
.day-card-header:hover{background:rgba(255,255,255,.02)}

.day-header-left{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
.day-number{font-size:18px;font-weight:700}
.day-date{font-size:13px;color:var(--text-dim)}

.day-header-right{display:flex;gap:12px;align-items:center}
.day-stats{font-size:13px;color:var(--text-dim)}
.expand-icon{font-size:14px;color:var(--text-dim);transition:transform .2s}

.mini-badge{font-size:10px;font-weight:700;padding:4px 8px;border-radius:6px;text-transform:uppercase}
.mini-badge.primary{background:rgba(59,130,246,.2);color:var(--primary)}
.mini-badge.success{background:rgba(16,185,129,.2);color:var(--success)}

.day-card-body{display:none;padding:0 16px 16px;border-top:1px solid var(--border)}
.day-card-body.expanded{display:block}

/* Exercise Quick View */
.exercise-quick{margin-top:12px;border:1px solid var(--border);border-radius:8px;overflow:hidden}
.exercise-quick.expanded .exercise-quick-body{display:block}

.exercise-quick-header{display:flex;justify-content:space-between;align-items:center;padding:12px;cursor:pointer;background:rgba(17,24,39,.8);transition:background .2s}
.exercise-quick-header:hover{background:rgba(17,24,39,1)}

.exercise-info{display:flex;gap:8px;align-items:center}
.exercise-label{font-size:10px;font-weight:700;text-transform:uppercase;color:var(--text-dim);background:rgba(255,255,255,.05);padding:2px 6px;border-radius:4px}
.exercise-name{font-size:14px;font-weight:600}

.exercise-meta{display:flex;gap:12px;align-items:center;font-size:13px}
.exercise-weight{font-weight:700;color:var(--primary)}
.exercise-intensity{color:var(--text-dim)}
.exercise-progress{color:var(--success)}
.quick-swap{background:rgba(255,255,255,.04);border:1px solid var(--border);color:var(--text);padding:4px 8px;border-radius:8px;font-size:12px;cursor:pointer;max-width:190px}
.quick-swap:hover{border-color:rgba(59,130,246,.6)}
.quick-swap:focus{outline:none;border-color:var(--primary)}
.exercise-expand{font-size:12px;color:var(--text-dim);transition:transform .2s}

.exercise-quick-body{display:none;padding:12px;background:rgba(10,14,26,.9)}

.exercise-progress-bar{height:4px;background:rgba(31,41,55,.6);border-radius:2px;overflow:hidden;margin-bottom:12px}
.exercise-progress-fill{height:100%;background:linear-gradient(90deg,var(--success),var(--primary));transition:width .3s}

/* Mini Set View */
.sets-mini{display:flex;flex-direction:column;gap:8px;overflow-x:auto;-webkit-overflow-scrolling:touch;touch-action:pan-x pan-y;padding-bottom:6px}
.set-mini{display:grid;grid-template-columns:32px 70px 1fr 1fr 1fr 120px;gap:8px;align-items:center;padding:8px;background:rgba(17,24,39,.6);border-radius:6px;border:1px solid var(--border);transition:all .2s}
.set-mini:hover{background:rgba(17,24,39,1);border-color:var(--primary)}
.set-mini.status-easy{border-color:var(--success)}
.set-mini.status-made{border-color:var(--primary)}
.set-mini.status-tough{border-color:var(--warning)}
.set-mini.status-miss{border-color:var(--danger)}
.set-mini-label-row{background:transparent;border:none;padding:0 8px 4px;box-shadow:none}
.set-mini-label-row:hover{background:transparent;border-color:transparent}
.set-mini-label-row .col-label{font-size:11px;color:var(--text-dim);font-weight:700;text-transform:uppercase;letter-spacing:.06em}

.set-num{font-weight:700;font-size:14px;color:var(--text-dim)}
.set-target{font-size:12px;color:var(--text-dim)}

.set-input-mini{width:100%;padding:6px 8px;font-size:13px;font-weight:600;text-align:center;background:rgba(255,255,255,.03);border:1px solid var(--border);border-radius:6px;color:var(--text)}
.set-input-mini:focus{border-color:var(--primary);outline:none}
.set-input-mini.rpe{max-width:60px}

.set-actions-mini{display:flex;justify-content:flex-end;align-items:center;gap:6px}
.set-action-select{display:none;appearance:none;-webkit-appearance:none;background:rgba(255,255,255,.04);border:1px solid var(--border);color:var(--text);padding:6px 10px;border-radius:8px;font-size:12px;font-weight:700;line-height:1;cursor:pointer;min-width:54px;text-align:center}
.set-action-select:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 2px rgba(59,130,246,.25)}
.set-action-select option{background:#020617;color:#f8fafc;font-weight:600}

.set-status-btns-mini{display:flex;gap:4px}
.status-btn-mini{width:28px;height:28px;border-radius:6px;border:2px solid var(--border);background:rgba(17,24,39,.6);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:14px;transition:all .2s;padding:0}
.status-btn-mini:hover{transform:scale(1.08);border-color:var(--primary)}
.status-btn-mini.active[data-status="easy"]{background:rgba(16,185,129,.25);border-color:var(--success);box-shadow:0 0 8px rgba(16,185,129,.3)}
.status-btn-mini.active[data-status="made"]{background:rgba(59,130,246,.2);border-color:var(--primary);box-shadow:0 0 8px rgba(59,130,246,.3)}
.status-btn-mini.active[data-status="tough"]{background:rgba(245,158,11,.2);border-color:var(--warning);box-shadow:0 0 8px rgba(245,158,11,.3)}
.status-btn-mini.active[data-status="miss"]{background:rgba(239,68,68,.2);border-color:var(--danger);box-shadow:0 0 8px rgba(239,68,68,.3)}

.day-card-actions{display:flex;gap:8px;justify-content:flex-end;padding-top:12px;margin-top:12px;border-top:1px solid var(--border)}

.btn-mini{padding:8px 16px;font-size:13px;font-weight:600;border-radius:8px;border:none;cursor:pointer;transition:all .2s}
.btn-mini.success{background:var(--success);color:#fff}
.btn-mini.success:hover{background:#0d9668;transform:translateY(-1px)}
.btn-mini.secondary{background:rgba(255,255,255,.05);color:var(--text-dim);border:1px solid var(--border)}
.btn-mini.secondary:disabled{opacity:.5;cursor:not-allowed}

/* Old day card - keep for backward compat but hide */
.day-card{display:none}

.calendar-grid{display:flex;flex-direction:column;gap:0}
.day-badge{font-size:10px;font-weight:700;text-transform:uppercase;padding:4px 8px;border-radius:6px;letter-spacing:.5px}
.badge-snatch{background:rgba(139,92,246,.15);color:var(--purple);border:1px solid rgba(139,92,246,.3)}
.badge-cj{background:rgba(6,182,212,.15);color:var(--accent);border:1px solid rgba(6,182,212,.3)}
.badge-mixed{background:rgba(245,158,11,.15);color:var(--warning);border:1px solid rgba(245,158,11,.3)}
.badge-strength{background:rgba(239,68,68,.15);color:var(--danger);border:1px solid rgba(239,68,68,.3)}
.badge-recovery{background:rgba(16,185,129,.15);color:var(--success);border:1px solid rgba(16,185,129,.3)}
.badge-accessory{background:rgba(245,158,11,.15);color:var(--warning);border:1px solid rgba(245,158,11,.3)}

.exercise-preview{margin-top:10px;padding-top:10px;border-top:1px solid var(--border)}
.exercise-item{font-size:12px;color:var(--text-dim);padding:4px 0;display:flex;justify-content:space-between}
.exercise-item .name{font-weight:500;color:var(--text)}
.exercise-item .detail{font-size:11px}

/* Workout Detail View - Hidden by default, keep as fallback */
.workout-detail{display:none;position:fixed;inset:0;background:rgba(0,0,0,.85);backdrop-filter:blur(4px);z-index:200;padding:20px;overflow-y:auto}
.workout-detail.show{display:flex;align-items:flex-start;justify-content:center}
.workout-panel{background:var(--bg);border:1px solid var(--border);border-radius:16px;max-width:900px;width:100%;max-height:90vh;overflow-y:auto}
.workout-header{position:sticky;top:0;background:var(--card);padding:20px;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center;z-index:1}
.workout-body{padding:20px}

/* Exercise Groups */
.exercise-group{margin-bottom:20px;border:1px solid var(--border);border-radius:12px;overflow:hidden}
.group-header{background:rgba(17,24,39,.8);padding:14px 16px;cursor:pointer;display:flex;justify-content:space-between;align-items:center;transition:background .2s}
.group-header:hover{background:rgba(17,24,39,1)}
.group-header-left{display:flex;align-items:center;gap:10px;min-width:0}
.group-header-right{display:flex;align-items:center;gap:10px}
.group-header.collapsed .group-icon{transform:rotate(-90deg)}
.group-icon{transition:transform .2s;font-size:16px}
.group-title{font-size:15px;font-weight:700}
.group-meta{font-size:12px;color:var(--text-dim);margin-top:2px}

/* Swap Exercise */
.swap-btn{width:34px;height:34px;border-radius:10px;padding:0;display:inline-flex;align-items:center;justify-content:center;background:rgba(255,255,255,.06);border:1px solid var(--border);font-size:16px}
.swap-btn:hover{background:rgba(255,255,255,.10);transform:translateY(-1px)}
.swap-btn:active{transform:translateY(0)}

/* Week view quick-swap dropdown (improved contrast for dark UI) */
.quick-swap{
  background-color:rgba(15,23,42,.92);
  color:var(--text);
  border:1px solid rgba(51,65,85,.9);
  border-radius:10px;
  padding:6px 10px;
  font-weight:600;
  line-height:1.2;
  min-width:120px;
}
.quick-swap:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 2px rgba(59,130,246,.25)}
.quick-swap option{background-color:#020617;color:#f8fafc;font-weight:600}
.quick-swap optgroup{background-color:#020617;color:#94a3b8}
.quick-swap option[disabled]{color:#64748b}

.swap-modal{padding:2px}
.swap-current{font-size:13px;color:var(--text-dim)}
.swap-hint{font-size:12px;color:var(--text-dim);margin-top:6px;line-height:1.4}
.swap-search{margin-top:10px}
.swap-list{display:flex;flex-direction:column;gap:8px;margin-top:12px;max-height:42vh;overflow:auto;padding-right:4px}
.swap-choice{background:rgba(255,255,255,.05);border:1px solid var(--border);border-radius:12px;padding:10px 12px;justify-content:flex-start;font-weight:700}
.swap-choice:hover{background:rgba(255,255,255,.08)}
.swap-footer{display:flex;gap:10px;justify-content:flex-end;margin-top:14px}
.group-content{display:none;padding:16px}
.group-content.show{display:block}

/* Set Table */
.set-table{width:100%;border-collapse:separate;border-spacing:0 8px;margin-top:8px}
.set-row{background:rgba(10,14,26,.9);transition:all .2s}
.set-row:hover{background:rgba(17,24,39,1)}
.set-row td{padding:10px 8px;vertical-align:middle;border-top:1px solid var(--border);border-bottom:1px solid var(--border)}
.set-row td:first-child{border-left:1px solid var(--border);border-radius:8px 0 0 8px;width:40px;text-align:center;font-weight:700;font-size:12px;color:var(--text-dim)}
.set-row td:last-child{border-right:1px solid var(--border);border-radius:0 8px 8px 0}
.set-row input{width:100%;min-width:60px;padding:6px 8px;font-size:13px;font-weight:600;text-align:center;background:rgba(255,255,255,.03);border:1px solid var(--border);border-radius:6px;color:var(--text)}
.set-row input:focus{border-color:var(--primary)}

/* Status Buttons */
.status-select{display:none;appearance:none;-webkit-appearance:none;background:rgba(255,255,255,.04);border:1px solid var(--border);color:var(--text);padding:8px 10px;border-radius:10px;font-size:12px;font-weight:700;line-height:1;min-width:90px;cursor:pointer}
.status-select:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 2px rgba(59,130,246,.25)}
.status-select option{background:#020617;color:#f8fafc;font-weight:600}
.status-btns{display:flex;gap:5px;justify-content:flex-end}
.status-btn{width:36px;height:36px;border-radius:8px;border:2px solid var(--border);background:rgba(17,24,39,.6);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:16px;transition:all .2s;padding:0}
.status-btn:hover{transform:scale(1.08);border-color:var(--primary)}
.status-btn.active-easy{background:rgba(16,185,129,.25);border-color:var(--success);box-shadow:0 0 10px rgba(16,185,129,.35)}
.status-btn.active-made{background:rgba(59,130,246,.2);border-color:var(--primary);box-shadow:0 0 10px rgba(59,130,246,.35)}
.status-btn.active-tough{background:rgba(245,158,11,.2);border-color:var(--warning);box-shadow:0 0 10px rgba(245,158,11,.3)}
.status-btn.active-miss{background:rgba(239,68,68,.2);border-color:var(--danger);box-shadow:0 0 10px rgba(239,68,68,.3)}

/* Stats */
.stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(110px,1fr));gap:10px;margin:16px 0}
.stat-box{background:rgba(17,24,39,.6);border:1px solid var(--border);border-radius:10px;padding:12px;text-align:center}
.stat-value{font-size:20px;font-weight:700;margin-bottom:4px}
.stat-label{font-size:10px;color:var(--text-dim);text-transform:uppercase;letter-spacing:.5px}
.stat-card{background:rgba(17,24,39,.6);border:1px solid var(--border);border-radius:10px;padding:12px;text-align:center}
.stat-unit{font-size:12px;opacity:.7}

/* Progress Bar */
.progress-bar{width:100%;height:6px;background:rgba(31,41,55,.6);border-radius:3px;overflow:hidden;margin-top:12px}
.progress-fill{height:100%;background:linear-gradient(90deg,var(--primary),var(--purple));transition:width .3s;border-radius:3px}

/* Toast */
.toast{position:fixed;bottom:100px;left:50%;transform:translateX(-50%);background:rgba(17,24,39,.98);backdrop-filter:blur(8px);border:1px solid var(--border);padding:12px 18px;border-radius:10px;font-size:13px;font-weight:600;z-index:300;display:none;box-shadow:0 4px 20px rgba(0,0,0,.5)}
.toast.show{display:block;animation:slideUp .3s}
@keyframes slideUp{from{transform:translateX(-50%) translateY(20px);opacity:0}to{transform:translateX(-50%);opacity:1}}

/* Execution Mode */
.exec-overlay{position:fixed;inset:0;background:rgba(0,0,0,.88);backdrop-filter:blur(6px);display:none;align-items:center;justify-content:center;z-index:320;padding:16px}
.exec-overlay.show{display:flex}
.exec-panel{background:var(--bg);border:1px solid var(--border);border-radius:20px;max-width:720px;width:100%;box-shadow:0 20px 70px rgba(0,0,0,.6);overflow:hidden}
.exec-header{background:rgba(17,24,39,.9);border-bottom:1px solid var(--border);padding:16px;display:flex;justify-content:space-between;align-items:center;gap:10px}
.exec-title{font-size:16px;font-weight:800}
.exec-sub{font-size:12px;color:var(--text-dim);margin-top:2px}
.exec-body{padding:18px}
.exec-card{background:rgba(17,24,39,.55);border:1px solid var(--border);border-radius:16px;padding:16px}
.exec-setline{display:flex;justify-content:space-between;align-items:flex-end;gap:10px;flex-wrap:wrap}
.exec-exercise{font-size:18px;font-weight:800}
.exec-setmeta{font-size:12px;color:var(--text-dim)}
.exec-target{margin-top:10px;font-size:13px;color:var(--text-dim)}
.exec-inputs{display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px;margin-top:14px}
.exec-inputs input{padding:12px 12px;font-size:16px;font-weight:800;text-align:center;border-radius:12px}
.exec-actions{display:flex;gap:10px;margin-top:16px}
.exec-actions button{flex:1;padding:14px 12px;font-size:14px;border-radius:14px}
.exec-actions .easy{background:rgba(16,185,129,.18);border:1px solid rgba(16,185,129,.4);color:var(--success)}
.exec-actions .made{background:rgba(59,130,246,.18);border:1px solid rgba(59,130,246,.45);color:var(--primary)}
.exec-actions .tough{background:rgba(245,158,11,.16);border:1px solid rgba(245,158,11,.4);color:var(--warning)}
.exec-actions .miss{background:rgba(239,68,68,.16);border:1px solid rgba(239,68,68,.4);color:var(--danger)}
.exec-actions button:hover{transform:translateY(-1px)}
.exec-actions button:active{transform:translateY(0)}
.exec-actions button.active{box-shadow:0 0 18px rgba(255,255,255,.08)}
.exec-footer{display:flex;gap:10px;margin-top:14px;align-items:center;justify-content:space-between;flex-wrap:wrap}
.exec-navbtn{background:rgba(255,255,255,.05);border:1px solid var(--border)}
.exec-next{font-size:12px;color:var(--text-dim)}

@media(max-width:520px){
  .exec-inputs{grid-template-columns:1fr 1fr;}
  .exec-inputs .rpe-wrap{grid-column:1/-1}

  /* Mobile set row: prioritize seeing weight/reps/rpe by collapsing action buttons into a dropdown */
  /* Wider weight field; actions become a compact dropdown */
  .set-mini{grid-template-columns:28px 56px minmax(92px,1.3fr) minmax(54px,.8fr) minmax(54px,.8fr) 56px;gap:6px}
  .set-input-mini{padding:6px 6px;font-size:13px;min-width:78px !important}
  .set-mini input[data-field="weight"]{min-width:92px !important}
  .set-input-mini.rpe{min-width:56px !important}
  .set-status-btns-mini{display:none !important}
  .set-action-select{display:inline-flex !important}

  /* Workout detail set table: collapse status buttons into dropdown */
  .status-btns{display:none !important}
  .status-select{display:inline-flex !important}
}

/* Nav */
nav{position:fixed;bottom:0;left:0;right:0;background:rgba(10,14,26,.98);backdrop-filter:blur(12px);border-top:1px solid var(--border);display:flex;z-index:100;padding:6px 0}
.nav-item{flex:1;display:flex;flex-direction:column;align-items:center;gap:3px;padding:10px 8px;color:var(--text-dim);cursor:pointer;border:none;background:none;transition:all .2s;font-size:11px;font-weight:600}
.nav-item:hover{color:var(--text)}
.nav-item.active{color:var(--primary)}
.nav-icon{font-size:20px}

/* Modal */
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.8);backdrop-filter:blur(4px);display:none;align-items:center;justify-content:center;z-index:250;padding:20px}
.modal-overlay.show{display:flex}
.modal{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:24px;max-width:500px;width:100%;max-height:80vh;overflow-y:auto}
.modal-title{font-size:18px;font-weight:700;margin-bottom:8px}
.modal-subtitle{font-size:13px;color:var(--text-dim);margin-bottom:16px}

/* Readiness Check */
.readiness-overlay{position:fixed;inset:0;background:rgba(0,0,0,.85);backdrop-filter:blur(6px);display:none;align-items:center;justify-content:center;z-index:300;padding:20px}
.readiness-overlay.show{display:flex}
.readiness-modal{background:var(--card);border:1px solid var(--border);border-radius:20px;padding:28px;max-width:420px;width:100%;box-shadow:0 20px 60px rgba(0,0,0,.5)}
.readiness-title{font-size:20px;font-weight:700;margin-bottom:4px;display:flex;align-items:center;gap:10px}
.readiness-subtitle{font-size:13px;color:var(--text-dim);margin-bottom:24px}
.readiness-item{margin-bottom:20px}
.readiness-label{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;font-size:14px;font-weight:600}
.readiness-value{color:var(--primary);font-weight:700}
.readiness-scale{display:flex;gap:6px}
.readiness-btn{flex:1;padding:12px 8px;background:rgba(255,255,255,.03);border:2px solid var(--border);border-radius:10px;color:var(--text-dim);font-size:13px;font-weight:600;cursor:pointer;transition:all .2s}
.readiness-btn:hover{background:rgba(255,255,255,.06);border-color:var(--text-dim)}
.readiness-btn.selected{background:linear-gradient(135deg,rgba(59,130,246,.2),rgba(139,92,246,.2));border-color:var(--primary);color:var(--primary);box-shadow:0 0 12px rgba(59,130,246,.2)}
.readiness-btn.low.selected{background:rgba(239,68,68,.15);border-color:var(--danger);color:var(--danger)}
.readiness-btn.med.selected{background:rgba(245,158,11,.15);border-color:var(--warning);color:var(--warning)}
.readiness-btn.high.selected{background:rgba(16,185,129,.15);border-color:var(--success);color:var(--success)}
.readiness-slider{width:100%;margin:8px 0}
.readiness-actions{display:flex;gap:10px;margin-top:24px}
.readiness-actions button{flex:1}
.readiness-summary{background:rgba(59,130,246,.08);border:1px solid rgba(59,130,246,.2);border-radius:12px;padding:16px;margin-top:20px}
.readiness-score{display:flex;align-items:center;justify-content:center;gap:12px;font-size:24px;font-weight:700}
.readiness-score .score{color:var(--primary)}
.readiness-score.low .score{color:var(--danger)}
.readiness-score.med .score{color:var(--warning)}
.readiness-score.high .score{color:var(--success)}
.readiness-hint{font-size:12px;color:var(--text-dim);text-align:center;margin-top:8px}
.btn-readiness{display:flex;align-items:center;gap:6px;padding:8px 12px;background:rgba(139,92,246,.1);border:1px solid rgba(139,92,246,.3);border-radius:8px;color:var(--purple);font-size:12px;font-weight:600;cursor:pointer;transition:all .2s}
.btn-readiness:hover{background:rgba(139,92,246,.2)}
.btn-readiness.logged{background:rgba(16,185,129,.1);border-color:rgba(16,185,129,.3);color:var(--success)}

/* Utility */
.hidden{display:none!important}
.flex{display:flex;gap:8px}
.flex-between{display:flex;justify-content:space-between;align-items:center}
.mt-2{margin-top:16px}
.help-text{font-size:12px;color:var(--text-dim);padding:12px;background:rgba(59,130,246,.05);border-left:3px solid var(--primary);border-radius:6px;margin-top:12px}
.help{font-size:12px;color:var(--text-dim);margin-top:6px}

/* Setup Sections */
.setup-section{margin-top:24px;padding-top:24px;border-top:1px solid var(--border)}
.setup-section:first-of-type{margin-top:16px;padding-top:0;border-top:none}
.section-header{display:flex;gap:12px;align-items:flex-start;margin-bottom:16px}
.section-number{width:32px;height:32px;background:linear-gradient(135deg,var(--primary),var(--purple));border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:16px;font-weight:700;flex-shrink:0}
.section-title{font-size:16px;font-weight:700;margin-bottom:2px}
.section-subtitle{font-size:13px;color:var(--text-dim)}
.section-desc{font-size:13px;color:var(--text-dim)}

/* Day Selector */
.day-selector{display:flex;gap:8px;flex-wrap:wrap}
.day-btn{flex:1;min-width:60px;padding:12px 8px;background:rgba(255,255,255,.03);border:2px solid var(--border);border-radius:10px;color:var(--text);font-size:13px;font-weight:600;cursor:pointer;transition:all .2s}
.day-btn:hover{background:rgba(255,255,255,.05);border-color:var(--primary)}
.day-btn.active{background:linear-gradient(135deg,rgba(59,130,246,.2),rgba(139,92,246,.2));border-color:var(--primary);color:var(--primary);box-shadow:0 0 12px rgba(59,130,246,.3)}
.day-btn.recovery{background:rgba(16,185,129,.1);border-color:var(--success);color:var(--success)}
.day-btn.accessory{background:rgba(245,158,11,.1);border-color:var(--warning);color:var(--warning)}
.day-btn.disabled{opacity:.3;cursor:not-allowed}

/* Tab Navigation */
.tab-navigation{display:flex;gap:8px;margin-bottom:16px;background:var(--card);border-radius:12px;padding:6px;border:1px solid var(--border)}
.tab-btn{flex:1;padding:10px 16px;background:transparent;border:none;border-radius:8px;color:var(--text-dim);font-size:14px;font-weight:600;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center;gap:6px}
.tab-btn:hover{background:rgba(255,255,255,.03);color:var(--text)}
.tab-btn.active{background:linear-gradient(135deg,var(--primary),var(--purple));color:#fff;box-shadow:0 2px 8px rgba(59,130,246,.3)}
.tab-content{display:none}
.tab-content.active{display:block}

/* Responsive */
@media(max-width:768px){
main{padding:12px 12px 24px}
.calendar-grid{grid-template-columns:1fr}
.workout-panel{max-width:100%;margin:0}
.form-row{grid-template-columns:1fr}
.set-row td{padding:8px 6px;font-size:12px}
.set-row input{min-width:50px;padding:5px 6px}
.status-btn{width:32px;height:32px;font-size:14px}
.day-selector{gap:6px}
.day-btn{min-width:50px;padding:10px 6px;font-size:12px}
.tab-btn{font-size:12px;padding:8px 12px}
.set-mini{grid-template-columns:28px 60px 1fr 1fr 1fr 132px;gap:6px;padding:6px}
.set-input-mini{padding:5px 6px;font-size:12px}
.day-card-header{flex-direction:column;align-items:flex-start;gap:8px}
.day-header-right{width:100%;justify-content:space-between}
.exercise-meta{gap:8px;font-size:12px}
.quick-swap{max-width:140px;padding:4px 6px}
}


/* Mobile-friendly improvements */
.table-scroll{overflow-x:auto;-webkit-overflow-scrolling:touch;width:100%}
.table-scroll > table{min-width:520px}
@media(max-width:480px){
  header{padding:10px 12px;flex-wrap:wrap;gap:10px}
  header h1{font-size:16px}
  .header-actions{width:100%;justify-content:flex-end}
  main{padding:12px 12px 24px;padding-bottom:calc(24px + env(safe-area-inset-bottom))}
  .tab-navigation{flex-wrap:wrap}
  .tab-btn{flex:1 1 48%;padding:10px 10px}
  /* Ensure readable select text on mobile (prevents iOS zoom and improves contrast) */
  .quick-swap{max-width:100%;font-size:16px;padding:8px 10px}
  .modal-overlay{padding:12px}
  .modal{max-height:calc(100dvh - 24px);border-radius:14px}
  .workout-detail{max-height:calc(100dvh - 24px);border-radius:14px}

  /* Make set rows usable without horizontal scrolling on small screens */
  .set-mini{grid-template-columns:24px 56px 1fr 1fr 1fr 120px;gap:6px}
  .set-num{font-size:13px}
  .set-target{font-size:11px}
  .set-status-btns-mini{gap:3px;justify-content:flex-end}
  .status-btn-mini{width:26px;height:26px;font-size:13px}
  .set-input-mini{min-width:0}
}

/* iOS Safari select rendering quirks */
@supports (-webkit-touch-callout: none) {
  .quick-swap{font-size:16px}
}


/* Info buttons (setup helpers) */
.label-row{display:flex;align-items:center;gap:8px}
.info-btn{
  width:22px;height:22px;border-radius:999px;
  border:1px solid rgba(148,163,184,0.35);
  background:rgba(15,23,42,0.6);
  color:var(--text-dim);
  display:inline-flex;align-items:center;justify-content:center;
  font-size:13px;line-height:1;
  cursor:pointer;
}
.info-btn:hover{border-color:rgba(56,189,248,0.6);color:var(--text)}
.info-btn:active{transform:translateY(1px)}


/* Bottom navigation */
.bottom-nav{
  position:fixed;left:0;right:0;bottom:0;
  display:flex;gap:8px;justify-content:space-around;align-items:center;
  padding:10px 10px calc(10px + env(safe-area-inset-bottom));
  background:rgba(8,10,18,0.92);
  backdrop-filter:blur(12px);
  border-top:1px solid var(--border);
  z-index:60;
}
.nav-btn{
  flex:1;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  gap:4px;
  padding:10px 0;
  border-radius:14px;
  background:transparent;
  color:var(--text-dim);
  border:1px solid transparent;
  font-size:11px;
  font-weight:700;
}
.nav-btn span{font-size:11px;font-weight:700}
.nav-btn.active{
  background:linear-gradient(135deg, rgba(59,130,246,.22), rgba(139,92,246,.18));
  color:var(--text);
  border-color:rgba(59,130,246,.25);
}

/* Sticky setup actions */
.setup-actions-sticky{
  position:sticky;
  bottom:92px; /* above bottom nav */
  display:flex;
  gap:12px;
  padding:12px;
  margin-top:18px;
  border-radius:18px;
  background:linear-gradient(180deg, rgba(7,10,18,0) 0%, rgba(7,10,18,.82) 35%, rgba(7,10,18,.92) 100%);
  backdrop-filter:blur(10px);
}
.setup-actions-bottom{display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap;margin:14px 0 6px;}
.setup-actions-bottom .primary{flex:1;min-width:220px;}
.setup-actions-bottom .secondary{min-width:110px;}


/* Mobile workout table tightening */
@media (max-width:520px){
  .container{padding:16px 12px 140px}
  .set-table{border-spacing:0 6px}
  .set-row td{padding:8px 6px}
  .set-row td:first-child,.set-row td:last-child{border-left:none;border-right:none}
  .set-row td{border-top:1px solid rgba(255,255,255,.06);border-bottom:1px solid rgba(255,255,255,.06)}
  .set-row td input, .set-row td select{max-width:100%}
  .card{border-radius:18px}
  .card-inner{padding:14px}
}


/* v12.1 UI cleanup */
.workout-section{display:block;margin-top:12px;}
.workout-top-actions{display:flex;justify-content:flex-end;gap:8px;margin:8px 0 4px;}
/* Prevent accidental horizontal scroll on iOS */
html, body {overflow-x:hidden;}
/* Reduce nested border feel in workout cards */
.exercise-card, .block-card, .day-card {border:1px solid rgba(255,255,255,0.06);}
.exercise-card .inner, .set-table, .set-row {border-color: rgba(255,255,255,0.06);}

/* Safety: prevent accidental horizontal scroll on iOS */
html, body { overflow-x: hidden; }

/* If any old mid-page dashboard/workout segmented control exists, hide it */
.workout-subtabs, .segmented-nav, .mid-tabs, .workout-mid-tabs { display:none !important; }



/* v12.4 iPhone fixes */
:root{ --tabbar-h: 86px; } /* approximate incl. safe area */
body{ overflow-x:hidden; }
.page-content{ padding-bottom: calc(var(--tabbar-h) + env(safe-area-inset-bottom)); }

/* v7.14: Collapsible sections styling */
.setup-section-collapsible summary:hover {
  background: rgba(59,130,246,0.12) !important;
  border-color: rgba(59,130,246,0.4) !important;
}
.setup-section-collapsible:not([open]) .collapse-indicator {
  transform: rotate(-90deg);
}
.collapse-indicator {
  transition: transform 0.2s ease;
}

/* Keep the primary action buttons at the end of Setup (no overlay on the tab bar) */
.setup-actions{ margin-top: 18px; padding-bottom: calc(var(--tabbar-h) + 24px + env(safe-area-inset-bottom)); }
.setup-actions .btn-row{ display:flex; gap:12px; }
.setup-actions .btn-row button{ flex:1; }
/* No sticky behavior on mobile ‚Äî avoids covering the tab bar and interfering with taps */

/* ---- Workout set table: iPhone friendly ---- */
.set-table { width:100%; border-collapse: collapse; table-layout: fixed; }
.set-table th, .set-table td { padding: 6px; text-align:left; vertical-align: middle; }
.set-table th { font-size: 12px; opacity: 0.85; }
.set-table .input { width: 100%; }
.set-table td:first-child, .set-table th:first-child { width: 44px; } /* Set */
.set-table td:nth-child(2), .set-table th:nth-child(2) { width: 30%; } /* Weight */
.set-table td:nth-child(3), .set-table th:nth-child(3) { width: 18%; } /* Reps */
.set-table td:nth-child(4), .set-table th:nth-child(4) { width: 18%; } /* RPE */
.set-table td:nth-child(5), .set-table th:nth-child(5) { width: 20%; } /* Action */

@media (max-width: 520px){
  .set-table th, .set-table td { padding: 4px; }
  .set-table th { font-size: 11px; }
  .set-table .input.small { font-size: 14px; padding: 8px 8px; }
}

.input.small{background:rgba(17,24,39,.8);border:1px solid var(--border);border-radius:8px;padding:8px;color:var(--text);font-size:14px}

</style>
</head>
<body>
<header>
<h1>LiftAI v7</h1>
<div class="header-actions">
<button class="icon secondary" id="btnAI" title="AI Programming Assistant">ü§ñ</button>
</div>
</header>
<div class="toast" id="toast"></div>
<!-- Modal -->
<div class="modal-overlay" id="modalOverlay" onclick="if(event.target===this){ closeModal(); }">
<div class="modal">
<div class="modal-title" id="modalTitle">Modal</div>
<div class="modal-subtitle" id="modalSubtitle"></div>
<div id="modalContent"></div>
<button class="secondary" id="modalClose" onclick="closeModal(); return false;" style="width:100%;margin-top:16px" type="button">Close</button>
</div>
</div>
<!-- Readiness Check Modal -->
<div class="readiness-overlay" id="readinessOverlay">
<div class="readiness-modal">
<div class="readiness-title">üí™ Pre-Workout Check</div>
<div class="readiness-subtitle">Quick readiness assessment to optimize your session</div>
<div class="readiness-item">
<div class="readiness-label">
<span>üò¥ Sleep (hours)</span>
<span class="readiness-value" id="sleepValue">7</span>
</div>
<input class="readiness-slider" id="sleepSlider" max="10" min="3" step="0.5" type="range" value="7"/>
</div>
<div class="readiness-item">
<div class="readiness-label">
<span>üåü Sleep Quality</span>
<span class="readiness-value" id="sleepQualityValue">3</span>
</div>
<div class="readiness-scale" id="sleepQualityScale">
<button class="readiness-btn low" data-val="1">Poor</button>
<button class="readiness-btn low" data-val="2">Fair</button>
<button class="readiness-btn med selected" data-val="3">OK</button>
<button class="readiness-btn high" data-val="4">Good</button>
<button class="readiness-btn high" data-val="5">Great</button>
</div>
</div>
<div class="readiness-item">
<div class="readiness-label">
<span>üò∞ Stress Level</span>
<span class="readiness-value" id="stressValue">3</span>
</div>
<div class="readiness-scale" id="stressScale">
<button class="readiness-btn high" data-val="1">Low</button>
<button class="readiness-btn high" data-val="2">Mild</button>
<button class="readiness-btn med selected" data-val="3">Mod</button>
<button class="readiness-btn low" data-val="4">High</button>
<button class="readiness-btn low" data-val="5">Extreme</button>
</div>
</div>
<div class="readiness-item">
<div class="readiness-label">
<span>ü¶µ Muscle Soreness</span>
<span class="readiness-value" id="sorenessValue">3</span>
</div>
<div class="readiness-scale" id="sorenessScale">
<button class="readiness-btn high" data-val="1">None</button>
<button class="readiness-btn high" data-val="2">Light</button>
<button class="readiness-btn med selected" data-val="3">Mod</button>
<button class="readiness-btn low" data-val="4">Sore</button>
<button class="readiness-btn low" data-val="5">Very</button>
</div>
</div>
<div class="readiness-item">
<div class="readiness-label">
<span>‚ö° Overall Readiness</span>
<span class="readiness-value" id="readinessValueDisplay">3</span>
</div>
<div class="readiness-scale" id="readinessScale">
<button class="readiness-btn low" data-val="1">Bad</button>
<button class="readiness-btn low" data-val="2">Low</button>
<button class="readiness-btn med selected" data-val="3">OK</button>
<button class="readiness-btn high" data-val="4">Good</button>
<button class="readiness-btn high" data-val="5">Great</button>
</div>
</div>
<div class="readiness-summary">
<div class="readiness-score med" id="readinessScoreSummary">
<span>Today's Score:</span>
<span class="score" id="readinessScoreNum">3.0</span>
<span>/5</span>
</div>
<div class="readiness-hint" id="readinessHint">Moderate readiness - normal training load</div>
</div>
<div class="readiness-actions">
<button class="secondary" onclick="closeReadinessModal()">Skip</button>
<button class="primary" onclick="saveReadinessCheck()">Save &amp; Continue</button>
</div>
</div>
</div>
<!-- Workout Detail Panel -->
<div class="workout-detail" id="workoutDetail">
<div class="workout-panel">
<div class="workout-header">
<div>
<div class="card-title" id="detailTitle">Workout</div>
<div class="card-subtitle" id="detailMeta">‚Äî</div>
</div>
<div class="flex">
<button class="secondary small" id="btnCloseDetail">‚úï Close</button>
<button class="success small" id="btnComplete">‚úì Complete</button>
</div>
</div>
<div class="workout-body" id="detailBody"></div>
</div>
</div>
<!-- Execution Mode (one-set-at-a-time) -->
<div class="exec-overlay" id="execOverlay">
<div class="exec-panel">
<div class="exec-header">
<div>
<div class="exec-title" id="execTitle">Workout</div>
<div class="exec-sub" id="execSubtitle">‚Äî</div>
</div>
<div class="flex">
<button class="secondary small" id="btnExecExit">‚úï Exit</button>
</div>
</div>
<div class="exec-body">
<div class="exec-card">
<div class="exec-setline">
<div>
<div class="exec-exercise" id="execExercise">‚Äî</div>
<div class="exec-setmeta" id="execSetMeta">Set ‚Äî</div>
</div>
<div class="exec-setmeta" id="execProgress">‚Äî</div>
</div>
<div class="exec-target" id="execTarget">‚Äî</div>
<div class="exec-inputs">
<div>
<label>Weight</label>
<input id="execWeight" inputmode="decimal" step="0.5" type="number"/>
</div>
<div>
<label>Reps</label>
<input id="execReps" inputmode="numeric" type="number"/>
</div>
<div class="rpe-wrap">
<label>RPE</label>
<input id="execRpe" inputmode="decimal" step="0.5" type="number"/>
</div>
</div>
<div class="exec-actions" id="execStatusBtns">
<button class="easy" data-status="easy">‚¨Ü Easy</button>
<button class="made" data-status="made">‚úÖ Made</button>
<button class="tough" data-status="tough">‚ö† Tough</button>
<button class="miss" data-status="miss">‚ùå Miss</button>
<button class="skip" id="btnCutRemaining" title="Skip the remaining sets for this exercise">‚úÇ Cut</button>
</div>
<div class="exec-footer">
<div class="flex" style="gap:8px">
<button class="exec-navbtn small" id="btnExecPrev">‚Üê Prev</button>
<button class="exec-navbtn small" id="btnExecNext">Next ‚Üí</button>
</div>
<div class="exec-next" id="execNextPreview">Next: ‚Äî</div>
</div>
</div>
<div class="day-card-actions" style="margin-top:14px">
<button class="btn-mini success" id="btnExecComplete">‚úì Complete Session</button>
<button class="btn-mini secondary" id="btnExecOpenTable">View Full Table</button>
</div>
</div>
</div>
</div>
<main>
<!-- Setup Page -->
<section id="pageSetup">
<div class="card">
<div class="card-title">Setup Your Training Block</div>
<div class="card-subtitle">Configure your personalized Olympic weightlifting program</div>
<div class="help-text" style="margin-top:16px">
<strong>üìä What we'll create:</strong> A science-backed Olympic weightlifting program using block periodization, complexes, and proper exercise progression. Main lifting days focus on competition lifts with accessories, while other days feature active recovery or supplemental work.
</div>
<!-- Step 1: Basic Info -->
<details class="setup-section-collapsible" style="margin-top:24px">
<summary style="cursor:pointer;list-style:none;padding:16px;background:rgba(59,130,246,0.08);border:1px solid rgba(59,130,246,0.25);border-radius:12px;display:flex;align-items:center;justify-content:space-between;transition:all 0.2s">
<div style="display:flex;align-items:center;gap:12px">
<span class="section-number">1</span>
<div>
<div class="section-title">Basic Information</div>
<div class="section-subtitle">Units and program structure</div>
</div>
</div>
<span class="collapse-indicator" style="font-size:18px;opacity:0.7">‚ñº</span>
</summary>
<div style="padding-top:16px">
<!-- Profile selection (local only) -->
<div class="card" style="margin-top:12px">
<div class="card-title">User</div>
<div class="form-row" style="margin-top:10px">
<div class="form-group" style="min-width:220px;flex:1">
<div class="label-row"><label>Profile</label><button aria-label="Profile info" class="info-btn" onclick="showInfo('profile')" type="button">‚ìò</button></div>
<div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap">
<select id="setupProfileSelect" style="min-width:220px;flex:1"></select>
<button class="secondary small" id="btnSetupNewProfile" type="button">New</button>
</div>
</div>
</div>
<div id="setupNewProfileRow" style="display:none;margin-top:10px;gap:10px;align-items:center;flex-wrap:wrap">
<input id="setupNewProfileName" placeholder="Profile name" style="flex:1;min-width:180px" type="text"/>
<button class="primary small" id="btnSetupCreateProfile" type="button">Create</button>
</div>
</div>
<div class="form-row">
<div class="form-group"><div class="label-row"><label>Units</label><button aria-label="Units info" class="info-btn" onclick="showInfo('units')" type="button">‚ìò</button></div><select id="setupUnits"><option value="kg">Kilograms (kg)</option><option value="lb">Pounds (lb)</option></select></div>
<div class="form-group"><div class="label-row"><label>Block Length</label><button aria-label="Block length info" class="info-btn" onclick="showInfo('blocklength')" type="button">‚ìò</button></div><select id="setupBlockLength"><option value="4">4 Weeks</option><option value="6">6 Weeks</option><option selected="" value="8">8 Weeks</option><option value="12">12 Weeks</option></select></div>
<div class="form-group"><div class="label-row"><label>Program Type</label><button aria-label="Program type info" class="info-btn" onclick="showInfo('programtype')" type="button">‚ìò</button></div><select id="setupProgram"><option value="general">General Strength &amp; Technique</option><option value="strength">Maximum Strength</option><option value="hypertrophy">Hypertrophy</option><option value="powerbuilding">Powerbuilding (Oly + Hypertrophy)</option><option value="competition">Competition Prep</option><option value="technique">Technique Development</option></select></div>
<div class="form-group"><div class="label-row"><label>Program Switch Ramp-In</label><button aria-label="Ramp-in info" class="info-btn" onclick="showInfo('transition')">‚ìò</button></div>
<div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap">
<select id="setupTransitionWeeks" style="min-width:180px">
<option value="0">No ramp-in (not recommended)</option>
<option value="1">Ramp-in: 1 week</option>
<option value="2">Ramp-in: 2 weeks</option>
</select>
<select id="setupTransitionProfile" style="min-width:180px">
<option value="standard">Standard</option>
<option value="conservative">Conservative</option>
<option value="aggressive">Aggressive</option>
</select>
</div>
</div>
</details>

<!-- Program Preferences -->
<details class="setup-section-collapsible" style="margin-top:16px">
<summary style="cursor:pointer;list-style:none;padding:16px;background:rgba(59,130,246,0.08);border:1px solid rgba(59,130,246,0.25);border-radius:12px;display:flex;align-items:center;justify-content:space-between;transition:all 0.2s">
<div style="display:flex;align-items:center;gap:12px">
<span style="background:rgba(59,130,246,0.15);color:rgba(59,130,246,1);padding:4px 10px;border-radius:6px;font-size:12px;font-weight:600;">OPTIONAL</span>
<div>
<div class="section-title">Program Preferences</div>
<div class="section-desc">Optional: streamline how the program feels day-to-day (volume, blocks, auto-regulation).</div>
</div>
</div>
<span class="collapse-indicator" style="font-size:18px;opacity:0.7">‚ñº</span>
</summary>
<div style="padding-top:16px">

  <div class="form-group">
    <div class="label-row">
      <label>Preference Preset</label>
      <button class="info-btn" type="button" onclick="showInfo('preferences')">‚ìò</button>
    </div>
    <select id="setupPrefPreset">
      <option value="balanced" selected>Balanced (recommended)</option>
      <option value="recovery">Recovery-biased (lower fatigue)</option>
      <option value="performance">Performance-biased (more intensity)</option>
    </select>
  </div>

  <div class="form-group">
    <div class="label-row">
      <label>Athlete Mode</label>
      <button class="info-btn" type="button" onclick="showInfo('athletemode')">‚ìò</button>
    </div>
    <select id="setupAthleteMode">
      <option value="recreational" selected>Recreational (sustainable)</option>
      <option value="competition">Competition (peak/taper)</option>
    </select>
  </div>

  <div class="form-group">
    <div class="label-row">
      <label>Blocks / Variations</label>
      <button class="info-btn" type="button" onclick="showInfo('blocks')">‚ìò</button>
    </div>
    <select id="setupIncludeBlocks">
      <option value="yes" selected>Blocks available (include block variations)</option>
      <option value="no">No blocks (swap to hang/alternate)</option>
    </select>
  </div>

  <div class="form-group">
    <div class="label-row">
      <label>Volume Preference</label>
      <button class="info-btn" type="button" onclick="showInfo('volume')">‚ìò</button>
    </div>
    <select id="setupVolumePref">
      <option value="standard">Standard (higher volume)</option>
      <option value="reduced" selected>Reduced (recommended for recreational)</option>
      <option value="minimal">Minimal (low-fatigue / maintenance)</option>
    </select>
  </div>

  <div class="form-group">
    <div class="label-row">
      <label>Auto-volume Regulation</label>
      <button class="info-btn" type="button" onclick="showInfo('autocut')">‚ìò</button>
    </div>
    <select id="setupAutoCut">
      <option value="yes" selected>On (suggest cutting remaining sets when technique/fatigue spikes)</option>
      <option value="no">Off</option>
    </select>
  </div>

  <div class="form-group">
    <div class="label-row">
      <label>Default Rest Timer Duration</label>
      <button class="info-btn" type="button" onclick="showInfo('restduration')">‚ìò</button>
    </div>
    <select id="setupRestDuration">
      <option value="60">1 minute</option>
      <option value="90">1.5 minutes</option>
      <option value="120">2 minutes</option>
      <option value="150">2.5 minutes</option>
      <option value="180" selected>3 minutes (recommended)</option>
      <option value="240">4 minutes</option>
      <option value="300">5 minutes</option>
    </select>
    <div style="margin-top:6px; font-size:12px; opacity:0.7; font-style:italic;">
      Note: Heavy lifts (85%+) will still use 5 minutes automatically
    </div>
  </div>

  <!-- Athlete Details moved inside Program Preferences -->
  <details style="margin-top:20px;border-top:1px solid rgba(255,255,255,0.1);padding-top:16px">
  <summary style="list-style:none;cursor:pointer;padding:8px 0;font-weight:600">Athlete Details (optional) <span style="opacity:0.5;font-size:12px;margin-left:8px">‚ñº Expand</span></summary>
  <div style="margin-top:12px">
<div class="label-row" style="justify-content:space-between;align-items:center;margin-bottom:6px">
<div style="font-weight:600">Basics</div>
<button aria-label="Athlete details info" class="info-btn" onclick="showInfo('athletedetails')" type="button">‚ìò</button>
</div>
<div class="form-row">
<div class="form-group">
<label>Age</label>
<input id="setupAge" max="99" min="10" placeholder="Optional (e.g., 32)" step="1" type="number"/>
</div>
<div class="form-group">
<div class="label-row"><label>Training Age</label><button aria-label="Training age info" class="info-btn" onclick="showInfo('trainingage')" type="button">‚ìò</button></div>
<select id="setupTrainingAge">
<option value="0.5">0‚Äì1 year</option>
<option selected="" value="1">1‚Äì2 years</option>
<option value="3">3‚Äì5 years</option>
<option value="6">6+ years</option>
</select>
</div>
</div>
<div class="form-row">
<div class="form-group">
<div class="label-row"><label>Recovery Capacity</label><button aria-label="Recovery info" class="info-btn" onclick="showInfo('recovery')" type="button">‚ìò</button></div>
<select id="setupRecovery">
<option value="1">Low</option>
<option value="2">Below average</option>
<option selected="" value="3">Typical</option>
<option value="4">Good</option>
<option value="5">High</option>
</select>
</div>
<div class="form-group">
<div class="label-row"><label>Primary Limiter</label><button aria-label="Limiter info" class="info-btn" onclick="showInfo('limiter')" type="button">‚ìò</button></div>
<select id="setupLimiter">
<option selected="" value="balanced">Balanced</option>
<option value="pull">Pull strength</option>
<option value="turnover">Turnover / speed under</option>
<option value="receiving">Receiving position</option>
<option value="overhead">Overhead / jerk stability</option>
<option value="squat">Squat strength</option>
<option value="speed">Speed / power</option>
</select>
</div>
</div>
</div>
<div style="margin-top:14px">
<div class="label-row" style="justify-content:space-between;align-items:center;margin-bottom:6px">
<div style="font-weight:600">Meet planning</div>
<button aria-label="Meet planning info" class="info-btn" onclick="showInfo('meetplanning')" type="button">‚ìò</button>
</div>
<div class="form-row">
<div class="form-group">
<label>Competition Date</label>
<input id="setupCompetitionDate" type="date"/>
</div>
<div class="form-group">
<div class="label-row"><label>Macro Period</label><button aria-label="Macro period info" class="info-btn" onclick="showInfo('macroperiod')" type="button">‚ìò</button></div>
<select id="setupMacroPeriod">
<option selected="" value="AUTO">Auto (from meet date)</option>
<option value="GDP">GDP (General Development)</option>
<option value="PP">PP (Preparatory)</option>
<option value="CC">CC (Competition)</option>
<option value="TP">TP (Transition)</option>
</select>
</div>
</div>
<div class="form-row">
<div class="form-group">
<div class="label-row"><label>Taper Style</label><button aria-label="Taper info" class="info-btn" onclick="showInfo('taper')" type="button">‚ìò</button></div>
<select id="setupTaperStyle">
<option selected="" value="default">Default (gentle deload)</option>
<option value="cwfhc">CWFHC 90/70/50 (3 sessions)</option>
</select>
</div>
<div class="form-group">
<div class="label-row"><label>Heavy Single Exposure</label><button aria-label="Heavy single info" class="info-btn" onclick="showInfo('heavysingle')" type="button">‚ìò</button></div>
<select id="setupHeavySingleExposure">
<option selected="" value="off">Off</option>
<option value="on">On (advanced/competition)</option>
</select>
</div>
</div>
</div>
<div style="margin-top:14px">
<div class="label-row" style="justify-content:space-between;align-items:center;margin-bottom:6px">
<div style="font-weight:600">Injury (optional)</div>
<button aria-label="Injuries info" class="info-btn" onclick="showInfo('injuries')" type="button">‚ìò</button>
</div>
<div class="form-row">
<div class="form-group">
<label>Active injury</label>
<select id="setupInjuryPreset">
<option selected="" value="none">None</option>
<option value="shoulder">Shoulder</option>
<option value="wrist">Wrist</option>
<option value="elbow">Elbow</option>
<option value="back">Back</option>
<option value="hip">Hip</option>
<option value="knee">Knee</option>
<option value="ankle">Ankle</option>
<option value="multiple">Multiple (advanced)</option>
</select>
</div>
<div class="form-group" style="display:flex;align-items:flex-end">
<div id="injuryAdvancedHint" style="font-size:12px;opacity:.8;display:none">Select multiple below.</div>
</div>
</div>
<div id="injuryAdvancedGrid" style="display:none">
<div class="grid" style="grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:8px">
<label class="chip"><input id="injShoulder" type="checkbox"/> Shoulder</label>
<label class="chip"><input id="injWrist" type="checkbox"/> Wrist</label>
<label class="chip"><input id="injElbow" type="checkbox"/> Elbow</label>
<label class="chip"><input id="injBack" type="checkbox"/> Back</label>
<label class="chip"><input id="injHip" type="checkbox"/> Hip</label>
<label class="chip"><input id="injKnee" type="checkbox"/> Knee</label>
<label class="chip"><input id="injAnkle" type="checkbox"/> Ankle</label>
</div>
</div>
</div>

  </div>
  </details>

</details>

<!-- ===== Advanced Programming (v10) moved up so you can't miss it ===== -->
</div>
</div>
<!-- ===== End Advanced Programming ===== -->




<!-- Step 2: Training Schedule -->
<details class="setup-section-collapsible" style="margin-top:16px">
<summary style="cursor:pointer;list-style:none;padding:16px;background:rgba(59,130,246,0.08);border:1px solid rgba(59,130,246,0.25);border-radius:12px;display:flex;align-items:center;justify-content:space-between;transition:all 0.2s">
<div style="display:flex;align-items:center;gap:12px">
<span class="section-number">2</span>
<div>
<div class="section-title">Training Schedule</div>
<div class="section-subtitle">Select your main lifting days, accessory days, and session duration</div>
</div>
</div>
<span class="collapse-indicator" style="font-size:18px;opacity:0.7">‚ñº</span>
</summary>
<div style="padding-top:16px">
<div class="form-group" style="margin-top:16px">
<div class="label-row"><label>Main Lifting Days (Olympic Weightlifting Focus)</label><button aria-label="Main lifting days info" class="info-btn" onclick="showInfo('maindays')" type="button">‚ìò</button></div>
<div class="day-selector" id="mainDaySelector">
<button class="day-btn" data-day="1" data-type="main" type="button">Mon</button>
<button class="day-btn" data-day="2" data-type="main" type="button">Tue</button>
<button class="day-btn" data-day="3" data-type="main" type="button">Wed</button>
<button class="day-btn" data-day="4" data-type="main" type="button">Thu</button>
<button class="day-btn" data-day="5" data-type="main" type="button">Fri</button>
<button class="day-btn" data-day="6" data-type="main" type="button">Sat</button>
<button class="day-btn" data-day="7" data-type="main" type="button">Sun</button>
</div>
</div>
<div class="form-group" style="margin-top:16px">
<div class="label-row"><label>Accessory Days (Supplemental Strength Work)</label><button aria-label="Accessory days info" class="info-btn" onclick="showInfo('accessorydays')" type="button">‚ìò</button></div>
<div class="day-selector" id="accessoryDaySelector">
<button class="day-btn" data-day="1" data-type="accessory" type="button">Mon</button>
<button class="day-btn" data-day="2" data-type="accessory" type="button">Tue</button>
<button class="day-btn" data-day="3" data-type="accessory" type="button">Wed</button>
<button class="day-btn" data-day="4" data-type="accessory" type="button">Thu</button>
<button class="day-btn" data-day="5" data-type="accessory" type="button">Fri</button>
<button class="day-btn" data-day="6" data-type="accessory" type="button">Sat</button>
<button class="day-btn" data-day="7" data-type="accessory" type="button">Sun</button>
</div>
</div>
<div class="form-group" style="margin-top:16px">
<div class="label-row"><label>Average Session Duration</label><button aria-label="Average session duration info" class="info-btn" onclick="showInfo('duration')" type="button">‚ìò</button></div>
<select id="setupDuration">
<option value="45">45 minutes (Time-efficient)</option>
<option value="60">60 minutes (Balanced)</option>
<option selected="" value="75">75 minutes (Standard)</option>
<option value="90">90 minutes (Extended)</option>
<option value="120">120 minutes (Competition prep)</option>
</select>
</div>
</details>

<!-- Step 3: Current Maxes -->
<details class="setup-section-collapsible" style="margin-top:16px">
<summary style="cursor:pointer;list-style:none;padding:16px;background:rgba(59,130,246,0.08);border:1px solid rgba(59,130,246,0.25);border-radius:12px;display:flex;align-items:center;justify-content:space-between;transition:all 0.2s">
<div style="display:flex;align-items:center;gap:12px">
<span class="section-number">3</span>
<div>
<div class="section-title">Current 1RM Maxes</div>
<div class="section-subtitle">Enter your competition lift and squat maxes</div>
</div>
</div>
<span class="collapse-indicator" style="font-size:18px;opacity:0.7">‚ñº</span>
</summary>
<div style="padding-top:16px">

<!-- v7.13 FIX #4: Wrap core 1RMs in collapsible section -->
<details open style="margin-top:12px">
<summary style="cursor:pointer; font-weight:600; padding:12px; background:rgba(59,130,246,0.1); border:1px solid rgba(59,130,246,0.3); border-radius:8px; user-select:none; display:flex; align-items:center; justify-content:space-between">
<span style="font-size:15px">üìä Core 1RMs (Required)</span>
<span style="font-size:12px; opacity:0.7">Tap to collapse</span>
</summary>
<div style="padding:16px 4px">
<div class="form-row">
<div class="form-group"><label>Snatch 1RM</label><input id="setupSnatch" placeholder="80" step="0.5" type="number"/></div>
<div class="form-group"><label>Clean &amp; Jerk 1RM</label><input id="setupCleanJerk" placeholder="100" step="0.5" type="number"/></div>
<div class="form-group"><label>Front Squat 1RM</label><input id="setupFrontSquat" placeholder="130" step="0.5" type="number"/></div>
<div class="form-group"><label>Back Squat 1RM</label><input id="setupBackSquat" placeholder="150" step="0.5" type="number"/></div>
<div class="form-group"><label>Push Press 1RM (opt)</label><input id="setupPushPress" placeholder="Auto" step="0.5" type="number"/></div>
<div class="form-group"><label>Strict Press 1RM (opt)</label><input id="setupStrictPress" placeholder="Auto" step="0.5" type="number"/></div>
</div>
</div>
</details>

<!-- Optional Custom Variation 1RMs -->
<div style="margin-top:24px">
<details style="margin-bottom:16px">
<summary style="cursor:pointer; font-weight:600; padding:8px; background:var(--bg-secondary); border-radius:4px; user-select:none">
<span style="font-size:14px">‚öôÔ∏è Optional: Custom Variation 1RMs</span>
<span style="font-size:12px; color:var(--text-dim); margin-left:8px">(Auto-calculated by default)</span>
</summary>
<div style="padding:16px 8px; background:var(--bg-secondary); border-radius:0 0 4px 4px; margin-top:-4px">
<div class="form-group">
<label>Power Snatch 1RM</label>
<div style="display:flex; gap:8px; align-items:center">
<input id="setupPowerSnatch" placeholder="Auto (88% of Snatch)" step="0.5" type="number" style="flex:1"/>
<button type="button" class="btn secondary small" onclick="clearOptional1RM('setupPowerSnatch')" style="white-space:nowrap">Use Auto</button>
</div>
<div class="help-text" id="autoCalcPowerSnatch" style="margin-top:4px"></div>
</div>
<div class="form-group">
<label>Power Clean 1RM</label>
<div style="display:flex; gap:8px; align-items:center">
<input id="setupPowerClean" placeholder="Auto (90% of C&J)" step="0.5" type="number" style="flex:1"/>
<button type="button" class="btn secondary small" onclick="clearOptional1RM('setupPowerClean')" style="white-space:nowrap">Use Auto</button>
</div>
<div class="help-text" id="autoCalcPowerClean" style="margin-top:4px"></div>
</div>
<div class="form-group">
<label>Overhead Squat 1RM</label>
<div style="display:flex; gap:8px; align-items:center">
<input id="setupOHS" placeholder="Auto (85% of Snatch)" step="0.5" type="number" style="flex:1"/>
<button type="button" class="btn secondary small" onclick="clearOptional1RM('setupOHS')" style="white-space:nowrap">Use Auto</button>
</div>
<div class="help-text" id="autoCalcOHS" style="margin-top:4px"></div>
</div>
<div class="form-group">
<label>Hang Snatch 1RM</label>
<div style="display:flex; gap:8px; align-items:center">
<input id="setupHangSnatch" placeholder="Auto (95% of Snatch)" step="0.5" type="number" style="flex:1"/>
<button type="button" class="btn secondary small" onclick="clearOptional1RM('setupHangSnatch')" style="white-space:nowrap">Use Auto</button>
</div>
<div class="help-text" id="autoCalcHangSnatch" style="margin-top:4px"></div>
</div>
<div class="form-group">
<label>Hang Power Snatch 1RM</label>
<div style="display:flex; gap:8px; align-items:center">
<input id="setupHangPowerSnatch" placeholder="Auto (80% of Snatch)" step="0.5" type="number" style="flex:1"/>
<button type="button" class="btn secondary small" onclick="clearOptional1RM('setupHangPowerSnatch')" style="white-space:nowrap">Use Auto</button>
</div>
<div class="help-text" id="autoCalcHangPowerSnatch" style="margin-top:4px"></div>
</div>
<div class="form-group">
<label>Hang Clean 1RM</label>
<div style="display:flex; gap:8px; align-items:center">
<input id="setupHangClean" placeholder="Auto (95% of C&J)" step="0.5" type="number" style="flex:1"/>
<button type="button" class="btn secondary small" onclick="clearOptional1RM('setupHangClean')" style="white-space:nowrap">Use Auto</button>
</div>
<div class="help-text" id="autoCalcHangClean" style="margin-top:4px"></div>
</div>
<div style="padding:8px; background:var(--bg-primary); border-radius:4px; margin-top:8px">
<div style="font-size:12px; color:var(--text-dim)">
<strong>üí° Tip:</strong> Leave blank to use auto-calculated values based on research (recommended for most lifters). Enter custom values only if you know your actual 1RMs for these variations.
</div>
</div>
</div>
</details>
</div>
</details>

<div class="setup-actions-bottom">


<div class="setup-actions"><div class="btn-row"><button class="primary" id="btnGenerateBlock">üöÄ Generate Training Block</button><button class="secondary" id="btnDemo">Demo</button></div></div></div>
</div>
</section>
<!-- Dashboard Page -->
<section class="hidden" id="pageDashboard">
<div class="workout-section" id="tabDashboard">
<div class="card">
<div class="card-title">Overview</div>
<div class="card-subtitle" id="dashboardSubtitle">‚Äî</div>
<div class="stats-grid" id="dashboardStats" style="margin-top:14px"></div>
<div class="flex" style="margin-top:14px;gap:8px;flex-wrap:wrap">
<button class="success" id="btnGoWorkout" style="flex:1">üèãÔ∏è Go to Workout</button>
<button class="secondary" id="btnExportCurrentBlock" title="Export current block">üì§ Export</button>
<button class="secondary" id="btnImportBlock" title="Import block from CSV">üì• Import</button>
<button class="secondary" id="btnPushToCloud" title="Save to cloud">‚òÅÔ∏è Push</button>
<button class="secondary" id="btnPullFromCloud" title="Restore from cloud">‚òÅÔ∏è Pull</button>
<button class="secondary" id="btnLogReadiness" title="Log readiness">üí™</button>
</div>
</div>
<div class="card">
<div class="card-title">Current Maxes</div>
<div class="card-subtitle">Your working 1RMs</div>
<div class="stats-grid" id="dashboardMaxes" style="margin-top:14px"></div>
</div>
</div>

</section>
<input type="file" id="fileImportBlock" accept=".csv" style="display:none" />

<!-- Workout Page -->
<section class="hidden" id="pageWorkout">
<div class="workout-section" id="tabWorkout">
<div class="card">
<div class="week-header">
<div>
<div class="card-title" id="blockInfo">Training Block</div>
<div class="card-subtitle" id="blockSubtitle">‚Äî</div>
</div>
<div class="week-selector">
<button class="week-nav" id="btnPrevWeek">‚Üê</button>
<span class="week-current" id="weekCurrent">Week 1</span>
<button class="week-nav" id="btnNextWeek">‚Üí</button>
</div>
</div>
<div class="stats-grid" id="weekStats"></div>
<div class="progress-bar"><div class="progress-fill" id="weekProgress"></div></div>
</div>
<div class="card">
<div class="card-title" id="weekTitle">This Week's Training</div>
<div class="calendar-grid" id="weekCalendar"></div>
</div>
</div>

</section>

<section class="page hidden" id="pageHistory">
<div class="card">
<div class="flex-between" style="margin-bottom:16px">
<div><div class="card-title">Training History</div><div class="card-subtitle">Completed sessions & saved blocks</div></div>
<div style="display:flex;gap:8px">
<button class="secondary small" id="btnImportBlock_History" title="Import training block from CSV">üì• Import Block</button>
<button class="secondary small" id="btnImport" title="Import workout history from JSON">üì• Import JSON</button>
</div>
</div>
<div id="historyList"></div>
</div>
<input type="file" id="fileImport" accept=".json" style="display:none" />
<input type="file" id="fileImportCSV" accept=".csv" style="display:none" />
</section>
<section class="page hidden" id="pageSettings">
<div class="card">
<div class="card-title">Profile &amp; Settings</div>
<div class="card-subtitle" id="settingsInfo">‚Äî</div>
<div class="form-group" style="margin-top:18px">
<div class="label-row"><label>Profile</label><button aria-label="Profile info" class="info-btn" onclick="showInfo('profile')" type="button">‚ìò</button></div>
<div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap">
<select id="settingsProfileSelect" style="min-width:200px;flex:1"></select>
<button class="secondary small" id="btnNewProfile" type="button">New</button>
</div>
<div id="newProfileRow" style="display:none;margin-top:10px;gap:10px;align-items:center;flex-wrap:wrap">
<input id="newProfileName" placeholder="Profile name" style="flex:1;min-width:180px" type="text"/>
<button class="primary small" id="btnCreateProfile" type="button">Create</button>
</div>
<div class="muted" style="margin-top:8px;font-size:12px">Profiles are stored on this device/browser only.</div>
</div>
<div class="form-group" style="margin-top:18px">
<div class="label-row"><label>Units</label><button aria-label="Units info" class="info-btn" onclick="showInfo('units')" type="button">‚ìò</button></div>
<select id="settingsUnits"><option value="kg">Kilograms (kg)</option><option value="lb">Pounds (lb)</option></select>
</div>
<div class="form-group" style="margin-top:12px">
<div class="label-row"><label>Equipment</label><button aria-label="Blocks equipment info" class="info-btn" onclick="showInfo('blocks')" type="button">‚ìò</button></div>
<div class="toggle-row">
<span class="toggle-label">Include blocks (if available)</span>
<label aria-label="Include blocks" class="switch">
<input checked="" id="settingsIncludeBlocks" type="checkbox"/>
<span class="slider"></span>
</label>
</div>
</div>
<div class="form-group" style="margin-top:14px">
<div class="label-row"><label>Volume Preference</label><button aria-label="Volume preference info" class="info-btn" onclick="showInfo('volume')" type="button">‚ìò</button></div>
<select id="settingsVolumePref">
<option value="standard">Standard (higher volume)</option>
<option value="reduced">Reduced (recommended)</option>
<option value="minimal">Minimal (low-fatigue / maintenance)</option>
</select>
</div>
<div class="form-group" style="margin-top:14px">
<div class="label-row"><label>Auto-Volume Regulation</label><button aria-label="Auto-volume regulation info" class="info-btn" onclick="showInfo('autocut')" type="button">‚ìò</button></div>
<div class="toggle-row">
<span class="toggle-label">Suggest cutting remaining sets when fatigue spikes</span>
<label aria-label="Auto-volume regulation" class="switch">
<input checked="" id="settingsAutoCut" type="checkbox"/>
<span class="slider"></span>
</label>
</div>
</div>
<div class="card-title" style="margin-top:20px;margin-bottom:14px">AI Coach</div>
<div class="form-group">
<div class="label-row"><label>AI Features</label><button aria-label="AI coach info" class="info-btn" onclick="showInfo('aicoach')" type="button">‚ìò</button></div>
<div class="toggle-row">
<span class="toggle-label">Enable AI Programming Assistant</span>
<label aria-label="Enable AI" class="switch">
<input checked="" id="settingsAIEnabled" type="checkbox"/>
<span class="slider"></span>
</label>
</div>
<div class="help" style="margin-top:10px">
    . Your token stays in Netlify environment variables.
  </div>
</div>
<div class="form-group" style="margin-top:14px">
<div class="label-row"><label>Hugging Face Model</label><button aria-label="Hugging Face model info" class="info-btn" onclick="showInfo('hfmodel')" type="button">‚ìò</button></div>
<input id="settingsAIModel" placeholder="e.g., meta-llama/Meta-Llama-3.1-8B-Instruct" type="text">
<div class="help"> (HF_MODEL).</div>
</input></div>
<div class="form-group" style="margin-top:10px">
<div class="label-row"><label>Test AI Connection</label><button aria-label="AI connection test info" class="info-btn" onclick="showInfo('aitest')" type="button">‚ìò</button></div>
<div class="flex" style="gap:10px;align-items:center">
<button class="secondary" id="btnTestAI" style="flex:0 0 auto">Test Connection</button>
<div id="aiTestStatus" style="font-size:12px;color:var(--text-dim);line-height:1.2"></div>
</div>
<div class="help" style="margin-top:8px"> to confirm the token and model work.</div>
</div>
<div class="label-row" style="margin-top:20px;margin-bottom:14px">
<div class="card-title" style="margin:0">Current Maxes</div>
<button aria-label="Current maxes info" class="info-btn" onclick="showInfo('maxes')" type="button">‚ìò</button>
</div>

<div class="form-row">
<div class="form-group"><label>Snatch 1RM</label><input id="settingsSnatch" step="0.5" type="number"/></div>
<div class="form-group"><label>Clean &amp; Jerk 1RM</label><input id="settingsCJ" step="0.5" type="number"/></div>
<div class="form-group"><label>Front Squat 1RM</label><input id="settingsFS" step="0.5" type="number"/></div>
<div class="form-group"><label>Back Squat 1RM</label><input id="settingsBS" step="0.5" type="number"/></div>
</div>
<div class="flex" style="margin-top:20px"><button class="success" id="btnSaveSettings" style="flex:1">Save &amp; Recalculate</button></div>
<div class="card-title" style="margin-top:20px;margin-bottom:14px">Data Management</div>
<div class="flex"><button class="danger" id="btnResetAll" style="flex:1">Reset All Data</button></div>
</div>
</section>
</main>
<script src="app.js"></script>
<nav aria-label="Primary" class="bottom-nav">
<button class="nav-btn active" id="navSetup" type="button">üõ†Ô∏è<span>Setup</span></button>
<button class="nav-btn" id="navDashboard" type="button">üè†<span>Dashboard</span></button>
<button class="nav-btn" id="navWorkout" type="button">üèãÔ∏è<span>Workout</span></button>
<button class="nav-btn" id="navHistory" type="button">üìä<span>History</span></button>
<button class="nav-btn" id="navSettings" type="button">‚öôÔ∏è<span>Settings</span></button>
</nav>
</body>
</html>
